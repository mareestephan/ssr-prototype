$(document).ready(function(){$("body").on("click",".addToCart",function(){var id=$(this).data("id");var addCart=AddToCart(id,1);if(addCart==true){var userInfo=Cookies.getJSON("userInfo");var element=$(this);$(this).removeClass("btn-primary");$(this).addClass("btn-success");$(this).find(".addToCartText").html("ADDED TO CART");var cartTotal=userInfo.cartTotal;$("#CartTotal").html(parseInt(cartTotal)+1);setTimeout(function(){element.removeClass("btn-success");element.addClass("btn-primary");element.find(".addToCartText").html("ADD TO CART");},2500);var name=$(this).data("name");var brand=$(this).data("brand");var price=$(this).data("price");var category=$(this).data("category");var variant=$(this).data("variant");gtmAddCart(id,name,price,brand,category,variant,1);}});$(".joinTheClub").on("click",function(){window.location.href="/signup";});$("body").on("click","#fashion",function(){window.location.href="/f/fashion";});$("body").on("click","#makeup",function(){window.location.href="/c/makeup/hb";});$("body").on("click","#fragrances",function(){window.location.href="/c/fragrances/ha";});$("body").on("click","#bathandbody",function(){window.location.href="/c/bath-body/hca";});$("body").on("click","#baby",function(){window.location.href="/a/baby%20&%20kids";});$("body").on("click","#toys",function(){window.location.href="/c/toys/af";});$("body").on("click",".addToCartWithQty",function(){var id=$(this).data("id");var qty=$(this).data("qty");if(qty==""){qty="1";}
var listType=$(this).data("listtype");if(parseInt(qty)>1){var addCart=AddToCart(id,qty);}else{var addCart=AddToCart(id,1);}
if(addCart==true){var userInfo=Cookies.getJSON("userInfo");var element=$(this);$(this).addClass("btn-success");$(this).html("ADDED TO CART");$("#infoPanel").show();$("#infoPanel").addClass("show");var cartTotal=userInfo.cartTotal;$("#CartTotal").html(parseInt(cartTotal)+parseInt(qty));if(listType=="SaveForLater"){setTimeout(function(){element.parent().parent().find('.removeFromList').trigger('click');},1000);}else{setTimeout(function(){element.removeClass("btn-success");element.html("ADD TO CART");},1000);}
var name=$(this).data("name");var brand=$(this).data("brand");var price=$(this).data("price");var category=$(this).data("category");var variant=$(this).data("variant");gtmAddCart(id,name,price,brand,category,variant,qty);}});$("body").on("click",".addToWishlist",function(){var id=$(this).data("wishlistid");var addWishlist=AddToWishlist(id,1);if(addWishlist==true){var element=$(this);$(this).find("img").attr("src","/assets/_icons/heart.svg");$(this).removeClass("addToWishlist").addClass("removeFromWishlist");setTimeout(function(){var userInfo=Cookies.getJSON("userInfo");$("#favouriteListTotalLoggedIn").html(userInfo.favouritesTotal);$("#favouriteListTotalNotLoggedIn").html(userInfo.favouritesTotal);},500);}});$("body").on("click",".removeFromWishlist",function(){var id=$(this).data("wishlistid");var addWishlist=RemoveFromWishlist(id);if(addWishlist==true){var element=$(this);$(this).find("img").attr("src","/assets/_icons/heart-light.svg");$(this).removeClass("removeFromWishlist").addClass("addToWishlist");setTimeout(function(){var userInfo=Cookies.getJSON("userInfo");$("#favouriteListTotalLoggedIn").html(userInfo.favouritesTotal);$("#favouriteListTotalNotLoggedIn").html(userInfo.favouritesTotal);},500);}});var itemIds=[];$.each($(".addToCart"),function(){var idToAdd=$(this).data("id");itemIds.push(idToAdd);});CheckWishlist(itemIds);gtmIndex();});function WishListIcons(itemIds){$.each(itemIds,function(index,itemId){$("[data-wishlistid='"+itemId.product.sku+"']").removeClass("addToWishlist").addClass("removeFromWishlist").find("img").attr("src","/assets/_icons/heart.svg");});}
function Redirect(categorycode,name){window.location.href="/c/"+name+"/"+categorycode;}
function gtmIndex(){var prods=[];var htmlProds=$("#gtmData .gtmDataItem");for(var i=0;i<htmlProds.length;i++){htmlProd=$(htmlProds[i]);var sku=htmlProd.data("sku");var name=htmlProd.data("name");var price=htmlProd.data("price");var brand=htmlProd.data("brand");var category=htmlProd.data("category");var variant=htmlProd.data("variant");var position=htmlProd.data("count");var prod={'name':name,'id':sku,'price':price,'brand':brand,'category':category,'variant':variant,'list':'Homepage','position':position};prods.push(prod);}
window.dataLayer=window.dataLayer||[];window.dataLayer.push({'ecommerce':{'currencyCode':'ZAR','impressions':prods}});}